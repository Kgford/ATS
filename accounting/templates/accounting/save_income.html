{% extends "accounting/layout.html" %}
{% load static %}

{% block title %}
    {{ index_type }}
{% endblock %}

{% block body %}
<body onload="check_start()">
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
	    <a class="navbar-brand col-md-3 col-lg-2 mr-0 px-3" href="#">ATS Income Manager</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-incanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarCollapse">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item">
				<span data-feather="log-out"></span>
					<a class="nav-link" href="{% url 'accounting:income' %}" aria-disabled="true">Income&nbsp;&nbsp;&nbsp;</a>
				</li>
				<li class="nav-item  active">
					<span data-feather="clipboard"></span>
					<a class="nav-link" href="{% url 'accounting:new_income' %}">New Income</a>
				</li>
				<li class="nav-item ">
					<span data-feather="dollar-sign"></span>
					<a class="nav-link" href="{% url 'vendor:vendor' %}">New Vendor or Store&nbsp;&nbsp;</a>
				</li>
				<li class="nav-item ">
				<span data-feather="log-out"></span>
					<a class="nav-link" href="{% url 'users:logout' %}" aria-disabled="true">log out</a>
				</li>
				<li class="nav-item ">
				<span data-feather="log-out"></span>
					<a class="nav-link" href="{% url 'users:base' %}" aria-disabled="true">home</a>
				</li>
			</ul>
		</div>
	</nav>
	<div class="container-fluid">
	  <div class="row">
		<nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
		  <div class="sidebar-sticky pt-3">
			<ul class="nav flex-column">
			   <li class="nav-item">
					<a class="nav-link" href="{% url 'dashboard:dashboard' %}">
					  <span data-feather="file"></span>
					  Dashboard
					</a>
				 </li>
				  <li class="nav-item active">
					<a class="nav-link" href="{% url 'accounting:invoice_item' %}">
					  <span data-feather="file"></span>
					  Invoicing
					</a>
				 </li>
				 <li class="nav-item">
					<a class="nav-link active" href="{% url 'accounting:income' %}">
					  <span data-feather="dollar-sign"></span>
					  Income <span class="sr-only">(current)</span>
					</a>
				 </li>
				 <li class="nav-item">
					<a class="nav-link active" href="{% url 'accounting:expenses' %}">
					  <span data-feather="dollar-sign"></span>
					  Expenses <span class="sr-only">(current)</span>
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{% url 'inventory:inven' %}">
					  <span data-feather="layers"></span>
					  Inventory
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{% url 'equipment:equipment' %}">
					  <span data-feather="layers"></span>
					  Equipment
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{% url 'client:client' %}">
					  <span data-feather="layers"></span>
					  Clients
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{% url 'contractors:contractor' %}">
					  <span data-feather="layers"></span>
					  Contractors
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{% url 'vendor:vendor' %}">
					  <span data-feather="layers"></span>
					  vendor
					</a>
				</li>
				
				<li class="nav-item">
					<a class="nav-link" href="{% url 'users:base' %}">
					  <span data-feather="layers"></span>
					  Home
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{% url 'users:logout' %}">
					  <span data-feather="layers"></span>
					  Logout
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{% url 'admin:index' %}">
					  <span data-feather="layers"></span>
					  Admin
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{% url 'atspublic:public' %}">
					  <span data-feather="file"></span>
					  Website
					</a>
				 </li>
				  
			</ul>
		</div>
	</nav>
	<main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">
	<form action = "{% url 'accounting:new_income' %}" method="post">
		{% csrf_token %}
		<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
			{% if inc == -1 %}
				<h1 class="h2">Create new Income Item</h1>
			{% else %}
				<h1 class="h2">Modify Income Item</h1>
			{% endif %}
			<div class="btn-toolbar mb-2 mb-md-0">
				<a style = "color:#CCD1D1" > {{operator}} logged in</a>
			</div>
		</div>
		{% if inc == -1 %}
			<input type='hidden' id = 'e_id' name='e_id' value = "-1" />
		{% else %}
			<input type='hidden' id = 'e_id' name='e_id' value = "{{inc.id}}" />
		{% endif %}
		<div class="row">
			<div class="col-sm-1 col-lg-2 grid-col">
				 <div class="form-group">
					<label>Income Type<span class="k-required"></span></label>
					<input type='hidden' name='category' data-select='category'/>
					<select id='_inc_type' name = "_inc_type" value = "{{inc.income_type}}" class="browser-default custom-select custom-select-lg mb-3" required >
						{% if inc == -1 %}
							<option selected>select option</option>
						{% else %}
							<option selected>{{inc.income_type}}</option>
						{% endif %}
						<option data-desc = 'income_type', value = "General">General</option>
						<option data-desc = 'income_type', value = "Marketing">Marketing</option>
						<option data-desc = 'income_type', value = "Salarys">Salarys</option>
					</select>
				</div>	
			</div>	
			<div class="col-sm-1 col-lg-2 grid-col">
				<div class="form-group">
					<label>Income Description<span class="k-required"></span></label>
					<input type='hidden' name='inc_desc' data-select='site'/>
					<select id='_inc_desc' name = "_inc_desc" class="browser-default custom-select custom-select-lg mb-3" required>
						{% if inc != -1  %}
							<option selected>{{inc.income_description}}</option>
						{% else %}
							<option selected>select menu</option>
						{% endif %}	
						<option data-desc = 'income', value = "Rent">Rent</option>
						<option data-desc = 'income', value = "Utilities">Utilities</option>
						<option data-desc = 'income', value = "Insurance">Insurance</option>
						<option data-desc = 'income', value = "Fees">Fees</option>
						<option data-desc = 'income', value = "Wages">Wages</option>
						<option data-desc = 'income', value = "Taxes">Taxes</option>
						<option data-desc = 'income', value = "Interest">Interest</option>
						<option data-desc = 'income', value = "Office Supplies">Office Supplies</option>
						<option data-desc = 'income', value = "Lab Supplies">Lab Supplies</option>
						<option data-desc = 'income', value = "Machine Shop Supplies">Machine Shop Supplies</option>
						<option data-desc = 'income', value = "Internet">Internet</option>
						<option data-desc = 'income', value = "Database">Database</option>
						<option data-desc = 'income', value = "Computers">Computers</option>
						<option data-desc = 'income', value = "Electronics">Electronics</option>
						<option data-desc = 'income', value = "Test Fixtures">Test Fixtures</option>
						<option data-desc = 'income', value = "Robot">Robot</option>
						<option data-desc = 'income', value = "Software">Software</option>
						<option data-desc = 'income', value = "Services">Services</option>
						<option data-desc = 'income', value = "Depreciation">Depreciation</option>
						<option data-desc = 'income', value = "Maintainance">Maintainance</option>
						<option data-desc = 'income', value = "Travel">Travel</option>
						<option data-desc = 'income', value = "Meals">Meals</option>
						<option data-desc = 'income', value = "Tools">Tools</option>
						<option data-desc = 'income', value = "Misc">Misc</option>
						<option data-desc = 'income', value = "Shipping">Shipping</option>
						<option data-desc = 'income', value = "Vehicle Lease">Vehicle Lease</option>
						<option data-desc = 'income', value = "Storage">Storage</option>
						<option data-desc = 'income', value = "Display">Display</option>
						<option data-desc = 'income', value = "Entertainment">Entertainment</option>
						<option data-desc = 'income', value = "Training">Training</option>
						<option data-desc = 'income', value = "Packaging">Packaging</option>
					</select>
				</div>
			</div>
			<div class="col-sm-2 col-lg-2 grid-col">
				<div class="form-group">
					<label>Client <span class="k-required"></span></label>
					<input type='hidden' name='inc_desc' data-select='model'/>
					<select id='_client' name = "_client" class="browser-default custom-select custom-select-lg mb-3" onchange="this.form.submit()">
						{% if client != -1 %}
							<option selected>{{client}}</option>
							<option data-desc = 'client', value = "select menu">select menu</option>
						{% else %}
							<option selected>select menu</option>
						{% endif %}	
						{% for cli in client_list %}
							<option data-desc = 'inc_desc', value = "{{cli}}">{{cli}}</option>
						{% endfor %}
					</select>
				</div>	
			</div>
		</div>	
		<div class="row">
			<div class="col-sm-1 col-lg-2 grid-col">
				<div class="form-group">
					<label>Invoice<span class="k-required"></span></label>
					<input type='hidden' name='_invoice' data-select='vendor'/>
					<select id='_vendor' name ='_invoice' class="browser-default custom-select custom-select-lg mb-3" required>
						{% if inc == -1%}
							<option data-desc = 'invoice', value = "select menu">select menu</option>
							<option data-desc = 'invoice', value = "N/A">"N/A"</option>
						{% else %}
							<option selected>{{invoice}}</option>
						{% endif %}	
						{% for invoi in invoice_list%}
							<option data-desc = 'vendor', value = "{{ven}}">{{invoi}}</option>
						{% endfor %}
					</select>
				</div>
			</div>
			<div class="col-sm-1 col-lg-1 grid-col">
				<div class="form-group">
					<label for="_total_cost">Total Charge</label>
					{% if inc == -1 %}
						<input id = "_total_cost" name = "_total_cost" input class="form-control" placeholder="Total cost"  required>
					{% else %}
						<input id = "_total_cost" name = "_total_cost" input class="form-control" value = "{{inc.total}}" required>
					{% endif %}
				</div>
			</div>
			<div class="col-sm-1 col-lg-2 grid-col">
				<div class="form-group">
					<label for="_quantity">Date</label>
					{% if inc == -1 %}
						<input type = "date" id = "_sale_date"  name = "_sale_date" input class="form-control" required>
					{% else %}
						<input type = "date" id = "_sale_date"  name = "_sale_date" value = {{inc.invoice_date}} input class="form-control"  required>
					{% endif %}
				</div>	
			</div>
			{% if inc == -1 %}
					<div class="col-sm-1 col-lg-1 grid-col">
						<div class="form-group">
							<label  for="_quantity">Save</label>
							<button type="submit" id = "_save" name = "_save"  class="btn btn-success">Save Income</button>
						</div>
					</div>
				{% else %}
					<div class="col-sm-1 col-lg-1 grid-col">
						<div class="form-group">
							<button type="submit" id = "_update" name = "_update"  class="btn btn-primary">Update</button>
							<button type="submit" id = "_delete" name = "_delete"  class="btn btn-danger">Delete&nbsp;</button>
						</div>
					</div>
				{% endif %}
			</div>
		</form>
		</div>	
		<h2 class="text-center">Income List</h2>
		<div class="table-responsive" Method = "POST">
			 <table id = "table_id" class="table table-striped table-sm">
			    <thead>
					<tr>
					  <th>Income Type</th>
					  <th>Income Descripton</th>
					  <th>Income Date</th>
					  <th>Item Description</th>
					  <th>Quantity</th>
					  <th>Item Cost</th>
					  <th>Total Cost</th>
					</tr>
			    </thead>
				<tbody>
					{% for inc1 in income_list %}
						<tr>
							<td><a class="nav-link" href="{% url 'accounting:new_income' %}?income_id={{inc1.id}}&invoice_id={{inc1.invoice_id}}&client_id={{inc1.client_id}}">{{inc1.income_type}}</td>
							<td><a class="nav-link" href="{% url 'accounting:new_income' %}?income_id={{inc1.id}}&invoice_id={{inc1.invoice_id}}&client_id={{inc1.client_id}}">{{inc1.income_description}}</td>
							<td><a class="nav-link" href="{% url 'accounting:new_income' %}?income_id={{inc1.id}}&invoice_id={{inc1.invoice_id}}&client_id={{inc1.client_id}}">{{inc1.sale_date}}</td>
							<td><a class="nav-link" href="{% url 'accounting:new_income' %}?income_id={{inc1.id}}&invoice_id={{inc1.invoice_id}}&client_id={{inc1.client_id}}">{{inc1.item_desc}}</td>
							<td><a class="nav-link" href="{% url 'accounting:new_income' %}?income_id={{inc1.id}}&invoice_id={{inc1.invoice_id}}&client_id={{inc1.client_id}}">{{inc1.quantity}}</td>
							<td><a class="nav-link" href="{% url 'accounting:new_income' %}?income_id={{inc1.id}}&invoice_id={{inc1.invoice_id}}&client_id={{inc1.client_id}}">{{inc1.item_cost}}</td>
							<td><a class="nav-link" href="{% url 'accounting:new_income' %}?income_id={{inc1.id}}&invoice_id={{inc1.invoice_id}}&client_id={{inc1.client_id}}">{{inc1.total_cost}}</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
    </main>
  </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.9.0/feather.min.js"></script> 
<script>'undefined'=== typeof _trfq || (window._trfq = []);'undefined'=== typeof _trfd && (window._trfd=[]),_trfd.push({'tccl.baseHost':'secureserver.net'}),_trfd.push({'ap':'cpsh'},{'server':'p3plcpnl0769'}) // Monitoring performance to make your website faster. If you want to opt-out, please contact web hosting support.</script>

</body>
{% endblock %}

</html>
